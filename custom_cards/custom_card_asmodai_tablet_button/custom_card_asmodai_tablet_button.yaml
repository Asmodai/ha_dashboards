---
card_asmodai_tablet_button:
  show_icon:       true
  show_name:       true
  show_label:      false
  triggers_update: "all"
  variables:
    icon: "[[[ return variables.icon; ]]]"
    name: "[[[ return variables.name; ]]]"
    path: "[[[ return variables.path; ]]]"
    colors:
      default:  "#eae1fe"
      occupied: "#ffd36e"
    entities:
      presence: "[[[ return variables.presence; ]]]"
  type: custom:button-card
  icon: "[[[ return variables.icon; ]]]"
  name: "[[[ return variables.name; ]]]"
  style:
    .: |
      ha-card {
        --keep-background: true;
        background-color: rgba(66, 46, 94, 0.8);
        box-shadow: 4px 4px 5px 1px rgba(0,0,0,0.3);
        border-radius: 20px;
        padding: 5px;
      }
  styles:
    name:
      - color: >-
          [[[
            if (variables.entities.presence) {
              if (states[variables.entities.presence].state == 'on') {
                return variables.colors.occupied;
              }
            }

            return variables.colors.default;
          ]]]
      - filter: "drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4))"
    icon:
      - color: >- 
          [[[
            if (!entity || entity.state == "off") {
              return variables.colors.default;
            }

            return 'rgba(' + entity.attributes.rgb_color + ',0.8)';
          ]]]
      - filter: >-
          [[[
            if (!entity || entity.state == "off") {
              return 'drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4))';
            }

            return 'drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4)) ' +
                   'drop-shadow(0px 0px 3px rgba(' + entity.attributes.rgb_color + ', 0.8))'
          ]]]
  tap_action:
    action: navigate
    navigation_path: "[[[ return variables.path; ]]]"

